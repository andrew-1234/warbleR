<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Detect frequency range on wave objects — freq_range_detec • warbleR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Detect frequency range on wave objects — freq_range_detec"><meta property="og:description" content="freq_range_detec detects the frequency range of acoustic signals on wave objects."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">warbleR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">vignettes</li>
    <li>
      <a href="../articles/Intro_to_warbleR.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;Introduction to warbleR&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_01.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_02.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_03.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/maRce10/warbleR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Detect frequency range on wave objects</h1>
    <small class="dont-index">Source: <a href="https://github.com/maRce10/warbleR/blob/HEAD/R/freq_range_detec.R" class="external-link"><code>R/freq_range_detec.R</code></a></small>
    <div class="hidden name"><code>freq_range_detec.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>freq_range_detec</code> detects the frequency range of acoustic signals on wave objects.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">freq_range_detec</span><span class="op">(</span><span class="va">wave</span>, wl <span class="op">=</span> <span class="fl">512</span>, fsmooth <span class="op">=</span> <span class="fl">0.1</span>, threshold <span class="op">=</span> <span class="fl">10</span>, 
dB.threshold <span class="op">=</span> <span class="cn">NULL</span>, wn <span class="op">=</span> <span class="st">"hanning"</span>, flim <span class="op">=</span> <span class="cn">NULL</span>, bp <span class="op">=</span> <span class="cn">NULL</span>, 
fast.spec <span class="op">=</span> <span class="cn">FALSE</span>, ovlp <span class="op">=</span> <span class="fl">50</span>, pal <span class="op">=</span> <span class="va">reverse.gray.colors.2</span>, 
 widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>, main <span class="op">=</span> <span class="cn">NULL</span>, plot <span class="op">=</span> <span class="cn">TRUE</span>, all.detec <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>wave</dt>
<dd><p>A 'wave' object produced by  <code><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></code> or similar functions.</p></dd>


<dt>wl</dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram, default 
is 512. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>) 
and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt>fsmooth</dt>
<dd><p>A numeric vector of length 1 to smooth the frequency spectrum with a mean
sliding window in kHz. This help to average amplitude "hills" to minimize the effect of
amplitude modulation. Default is 0.1.</p></dd>


<dt>threshold</dt>
<dd><p>Amplitude threshold (%) for frequency range detection. The frequency range (not the cumulative amplitude) is represented as percentage (100% = highest amplitude). Default is 10. Ignored if 'dB.threshold' is supplied.</p></dd>


<dt>dB.threshold</dt>
<dd><p>Amplitude threshold for frequency range detection (in dB). The
value indicates the decrease in dB in relation to the highest amplitude (e.g. 
the peak frequency) in which range will be detected. For instance a 
<code>dB.threshold = 20</code> means that the amplitude threshold would be 20 dB below
the highest amplitude. If provided 'threshold' is ignored. Default is <code>NULL</code>. 
Note that the power spectrum is normalized when using a dB scale, so it looks different than the one produced when no dB scale is used (e.g. when using 'threshold' argument).</p></dd>


<dt>wn</dt>
<dd><p>Character vector of length 1 specifying window name. Default is 
"hanning". See function <code><a href="https://rdrr.io/pkg/seewave/man/ftwindow.html" class="external-link">ftwindow</a></code> for more options. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>) and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt>flim</dt>
<dd><p>A numeric vector of length 2 for the frequency limit of 
the spectrogram (in kHz), as in <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>. Default is <code>NULL</code>.</p></dd>


<dt>bp</dt>
<dd><p>A numeric vector of length 2 for the lower and upper limits of a 
frequency bandpass filter (in kHz) or "frange" to indicate that values in 'bottom.freq' 
and 'top.freq' columns will be used as bandpass limits. Default is <code>NULL</code>.</p></dd>


<dt>fast.spec</dt>
<dd><p>Logical. If <code>TRUE</code> then image function is used internally to create spectrograms, which substantially 
increases performance (much faster), although some options become unavailable, as collevels, and sc (amplitude scale).
This option is indicated for signals with high background noise levels. Palette colors <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.1</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code>, 
<code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.3</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">topo.1</a></code> and <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">rainbow.1</a></code> (which should be imported from the package monitoR) seem
to work better with 'fast.spec' spectrograms. Palette colors <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.1</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code>, 
<code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.3</a></code> offer 
decreasing darkness levels.</p></dd>


<dt>ovlp</dt>
<dd><p>Numeric vector of length 1 specifying % of overlap between two 
consecutive windows, as in <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>. Default is 50. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>) and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt>pal</dt>
<dd><p>Color palette function for spectrogram. Default is reverse.gray.colors.2. See 
<code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code> for more palettes. Palettes as <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code> may work better when <code>fast.spec = TRUE</code>.</p></dd>


<dt>widths</dt>
<dd><p>Numeric vector of length 2 to control the relative widths of the spectro (first element) and spectrum (second element).</p></dd>


<dt>main</dt>
<dd><p>Character vector of length 1 specifying the plot title. Default is <code>NULL</code>.</p></dd>


<dt>plot</dt>
<dd><p>Logical. Controls whether an image file is produced for each selection (in the 
working directory). Default is <code>TRUE</code>.</p></dd>


<dt>all.detec</dt>
<dd><p>Logical. If <code>TRUE</code> returns the start and end of all detected amplitude
"hills". Otherwise only the range is returned. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame with 2 columns for low and high frequency values. A plot is produced (in the graphic device) if <code>plot = TRUE</code> (see details).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This functions aims to automatize the detection of frequency ranges. The frequency range is calculated as follows:</p><ul><li><p>bottom.freq = the start frequency of the amplitude 'hill' containing the highest amplitude at the given threshold.</p></li>
<li><p>top.freq = the end frequency of the amplitude 'hill' containing the highest amplitude at the given threshold.</p></li>
</ul><p>If <code>plot = TRUE</code> a graph including a spectrogram and a frequency spectrum is 
  produced in the graphic device. The graph would include gray areas in the frequency ranges excluded by the bandpass ('bp' argument), dotted lines highlighting the detected range.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="frange.html">frange</a></code>, <code><a href="autodetec.html">autodetec</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="op">{</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tico</span><span class="op">)</span>
<span class="fu">freq_range_detec</span><span class="op">(</span>wave <span class="op">=</span> <span class="va">tico</span>, wl <span class="op">=</span> <span class="fl">512</span>, fsmooth <span class="op">=</span> <span class="fl">0.01</span>, threshold <span class="op">=</span> <span class="fl">1</span>, bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">8</span><span class="op">)</span>,
 widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sheep</span><span class="op">)</span>
<span class="fu">freq_range_detec</span><span class="op">(</span>wave <span class="op">=</span> <span class="va">sheep</span>, wl <span class="op">=</span> <span class="fl">512</span>, fsmooth <span class="op">=</span> <span class="fl">0.2</span>, threshold <span class="op">=</span> <span class="fl">50</span>, bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">1</span><span class="op">)</span>, 
flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1.5</span><span class="op">)</span>, pal <span class="op">=</span> <span class="va">reverse.heat.colors</span>, main <span class="op">=</span> <span class="st">"sheep"</span><span class="op">)</span>
<span class="op">}</span>

</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

